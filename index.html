<!doctype html>
<html lang="ja">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>人数換算：調味料</title>

<style>
:root { --w: 560px; }
body {
  font-family: system-ui, -apple-system, "Hiragino Kaku Gothic ProN", "Noto Sans JP", sans-serif;
  margin: 18px; line-height: 1.6;
}
h1 { font-size: 20px; margin-bottom: 12px; }

.card {
  max-width: var(--w);
  border: 1px solid #ddd;
  border-radius: 14px;
  padding: 14px;
  margin-bottom: 14px;
}

.row { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
.row3 { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 12px; }

label { font-weight: 650; display: block; margin-bottom: 6px; }

input[type="number"], select {
  font-size: 16px;
  padding: 8px;
  border-radius: 10px;
  border: 1px solid #ccc;
  box-sizing: border-box;
}

.number-control {
  display: flex;
  align-items: center;
  gap: 6px;
}
.number-control input {
  width: 70px; /* 入力欄を半分程度に */
  text-align: right;
}
.number-control span.unit {
  margin-left: 4px;
}
.number-control button {
  width: 34px;
  height: 34px;
  font-size: 18px;
  border-radius: 8px;
  border: 1px solid #ccc;
  background: #f5f5f5;
}
.number-control button:active {
  transform: translateY(1px);
}

.muted { font-size: 12.5px; color: #666; }
.hr { height: 1px; background: #eee; margin: 12px 0; }

.result b { font-size: 18px; }
.mono { font-variant-numeric: tabular-nums; }

@media (max-width:520px){
  .row, .row3 { grid-template-columns: 1fr; }
}
</style>
</head>

<body>
<h1>人数換算：調味料</h1>

<div class="card">
  <div class="row">
    <div>
      <label>レシピは何人分？</label>
      <input id="recipeServings" type="number" min="1" value="1">
    </div>
    <div>
      <label>作りたいのは何人分？</label>
      <input id="targetServings" type="number" min="1" value="1">
    </div>
  </div>
</div>

<div class="card">
  <label>調味料</label>
  <select id="condiment"></select>

  <div class="hr"></div>

  <div class="row3">
    <div>
      <label>大さじ</label>
      <div class="number-control">
        <button onclick="step('tbsp',-0.5)">−</button>
        <input id="tbsp" type="number" step="0.5" value="0">
        <button onclick="step('tbsp',0.5)">＋</button>
        <span class="unit">杯</span>
      </div>
    </div>

    <div>
      <label>大さじ1/2</label>
      <div class="number-control">
        <button onclick="step('tbspHalf',-1)">−</button>
        <input id="tbspHalf" type="number" step="1" value="0">
        <button onclick="step('tbspHalf',1)">＋</button>
        <span class="unit">杯</span>
      </div>
    </div>
  </div>

  <div class="row3" style="margin-top:10px;">
    <div>
      <label>小さじ</label>
      <div class="number-control">
        <button onclick="step('tsp',-0.5)">−</button>
        <input id="tsp" type="number" step="0.5" value="0">
        <button onclick="step('tsp',0.5)">＋</button>
        <span class="unit">杯</span>
      </div>
    </div>

    <div>
      <label>小さじ1/2</label>
      <div class="number-control">
        <button onclick="step('tspHalf',-1)">−</button>
        <input id="tspHalf" type="number" step="1" value="0">
        <button onclick="step('tspHalf',1)">＋</button>
        <span class="unit">杯</span>
      </div>
    </div>

    <div>
      <label>小さじ1/4</label>
      <div class="number-control">
        <button onclick="step('tspQuarter',-1)">−</button>
        <input id="tspQuarter" type="number" step="1" value="0">
        <button onclick="step('tspQuarter',1)">＋</button>
        <span class="unit">杯</span>
      </div>
    </div>
  </div>

  <div class="hr"></div>

  <div class="result mono">
    <div>大さじ：<b id="outTbsp">0</b> 杯</div>
    <div>小さじ：<b id="outTsp">0</b> 杯</div>
    <div>容量：<b id="outCc">0</b> cc</div>
    <div>重さ：約 <b id="outG">0</b> g</div>
  </div>
</div>

<script>
const DENSITY = {
  "水":100,"しょうゆ":120,"調理酒":100,"みりん":120,"砂糖":65,"ケチャップ":140,"ソース":120
};
const CC = { tbsp:15, tbspHalf:7.5, tsp:5, tspHalf:2.5, tspQuarter:1.25 };
const $ = id => document.getElementById(id);

Object.keys(DENSITY).forEach(k=>{
  const o=document.createElement("option");
  o.value=k;o.textContent=k;
  $("condiment").appendChild(o);
});

function clampPeople(el){
  if(el.value < 1 || !el.value) el.value = 1;
}

function step(id,delta){
  const i=$(id);
  i.value = Math.max(0, (+i.value||0) + delta);
  calc();
}

function round1(n){ return Math.round(n*10)/10; }

function calc(){
  clampPeople($("recipeServings"));
  clampPeople($("targetServings"));

  const factor = $("targetServings").value / $("recipeServings").value;
  const cc =
    $("tbsp").value*CC.tbsp +
    $("tbspHalf").value*CC.tbspHalf +
    $("tsp").value*CC.tsp +
    $("tspHalf").value*CC.tspHalf +
    $("tspQuarter").value*CC.tspQuarter;

  const total = cc * factor;
  $("outTbsp").textContent = round1(total/15);
  $("outTsp").textContent  = round1(total/5);
  $("outCc").textContent   = round1(total);
  $("outG").textContent    = round1(total*DENSITY[$("condiment").value]/100);
}

document.querySelectorAll("input,select").forEach(e=>e.addEventListener("input",calc));
$("condiment").value="水";
calc();
</script>
</body>
</html>
