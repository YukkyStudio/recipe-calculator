<!doctype html>
<html lang="ja">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>人数換算：調味料</title>

<style>
:root { --w: 560px; }
body {
  font-family: system-ui, -apple-system, "Hiragino Kaku Gothic ProN", "Noto Sans JP", sans-serif;
  margin: 18px; line-height: 1.6;
}
h1 { font-size: 20px; margin-bottom: 12px; }

.card {
  max-width: var(--w);
  border: 1px solid #ddd;
  border-radius: 14px;
  padding: 14px;
  margin-bottom: 14px;
}

.row { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
.row3 { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 12px; }

label { font-weight: 650; display: block; margin-bottom: 6px; }

select {
  font-size: 16px;
  padding: 8px;
  border-radius: 10px;
  border: 1px solid #ccc;
  box-sizing: border-box;
  width: 100%;
}

.number-control {
  display: flex;
  align-items: center;
  gap: 6px;
}
.number-control input {
  width: 70px;
  text-align: right;
  font-size: 16px;
  padding: 8px;
  border-radius: 10px;
  border: 1px solid #ccc;
}
.number-control button {
  width: 34px;
  height: 34px;
  font-size: 18px;
  border-radius: 8px;
  border: 1px solid #ccc;
  background: #f5f5f5;
}
.number-control span.unit {
  margin-left: 4px;
  white-space: nowrap;
}

.hr { height: 1px; background: #eee; margin: 12px 0; }

/* 結果表示 */
.result {
  font-size: 1.5em;
}
.result-row {
  display: flex;
  justify-content: space-between;
  gap: 12px;
}
.result-item {
  flex: 1;
}
.result b {
  font-size: 1.2em;
}
.mono { font-variant-numeric: tabular-nums; }

@media (max-width:520px){
  .row, .row3 { grid-template-columns: 1fr; }
  .result-row { flex-direction: column; }
}
</style>
</head>

<body>
<h1>人数換算：調味料</h1>

<div class="card">
  <div class="row">
    <div>
      <label>レシピは何人分？</label>
      <div class="number-control">
        <button class="btn-step" data-target="recipeServings" data-delta="-1">−</button>
        <input id="recipeServings" type="number" value="1" readonly>
        <button class="btn-step" data-target="recipeServings" data-delta="1">＋</button>
        <span class="unit">人分</span>
      </div>
    </div>

    <div>
      <label>作りたいのは何人分？</label>
      <div class="number-control">
        <button class="btn-step" data-target="targetServings" data-delta="-1">−</button>
        <input id="targetServings" type="number" value="1" readonly>
        <button class="btn-step" data-target="targetServings" data-delta="1">＋</button>
        <span class="unit">人分</span>
      </div>
    </div>
  </div>
</div>

<div class="card">
  <label>調味料</label>
  <select id="condiment"></select>

  <div class="hr"></div>

  <div class="row3">
    <div>
      <label>大さじ（整数）</label>
      <div class="number-control">
        <button class="btn-step" data-target="tbsp" data-delta="-1">−</button>
        <input id="tbsp" type="number" value="0" readonly>
        <button class="btn-step" data-target="tbsp" data-delta="1">＋</button>
        <span class="unit">杯</span>
      </div>
    </div>

    <div>
      <label>大さじ1/2</label>
      <div class="number-control">
        <button class="btn-step" data-target="tbspHalf" data-delta="-1">−</button>
        <input id="tbspHalf" type="number" value="0" readonly>
        <button class="btn-step" data-target="tbspHalf" data-delta="1">＋</button>
        <span class="unit">杯</span>
      </div>
    </div>
  </div>

  <div class="row3" style="margin-top:10px;">
    <div>
      <label>小さじ</label>
      <div class="number-control">
        <button class="btn-step" data-target="tsp" data-delta="-1">−</button>
        <input id="tsp" type="number" value="0" readonly>
        <button class="btn-step" data-target="tsp" data-delta="1">＋</button>
        <span class="unit">杯</span>
      </div>
    </div>

    <div>
      <label>小さじ1/2</label>
      <div class="number-control">
        <button class="btn-step" data-target="tspHalf" data-delta="-1">−</button>
        <input id="tspHalf" type="number" value="0" readonly>
        <button class="btn-step" data-target="tspHalf" data-delta="1">＋</button>
        <span class="unit">杯</span>
      </div>
    </div>

    <div>
      <label>小さじ1/4</label>
      <div class="number-control">
        <button class="btn-step" data-target="tspQuarter" data-delta="-1">−</button>
        <input id="tspQuarter" type="number" value="0" readonly>
        <button class="btn-step" data-target="tspQuarter" data-delta="1">＋</button>
        <span class="unit">杯</span>
      </div>
    </div>
  </div>

  <div class="hr"></div>

  <div class="result mono">
    <div class="result-row">
      <div class="result-item">大さじ：<b id="outTbsp">0</b> 杯</div>
      <div class="result-item">小さじ：<b id="outTsp">0</b> 杯</div>
    </div>
    <div class="result-row">
      <div class="result-item">容量：<b id="outCc">0</b> cc</div>
      <div class="result-item">重さ：約 <b id="outG">0</b> g</div>
    </div>
  </div>
</div>

<script>
const DENSITY = {
  "水":100,"しょうゆ":120,"調理酒":100,"みりん":120,"砂糖":65,"ケチャップ":140,"ソース":120
};
const CC = { tbsp:15, tbspHalf:7.5, tsp:5, tspHalf:2.5, tspQuarter:1.25 };
const $ = id => document.getElementById(id);

Object.keys(DENSITY).forEach(k=>{
  const o=document.createElement("option");
  o.value=k; o.textContent=k;
  $("condiment").appendChild(o);
});

function round1(n){ return Math.round(n*10)/10; }

function applyStep(id, delta){
  const el = $(id);
  el.value = Math.max(0, Number(el.value) + delta);
  calc();
}

function calc(){
  const recipe = Math.max(1, Number($("recipeServings").value));
  const target = Math.max(1, Number($("targetServings").value));
  const factor = target / recipe;

  const cc =
    $("tbsp").value      * CC.tbsp +
    $("tbspHalf").value  * CC.tbspHalf +
    $("tsp").value       * CC.tsp +
    $("tspHalf").value   * CC.tspHalf +
    $("tspQuarter").value* CC.tspQuarter;

  const total = cc * factor;

  $("outTbsp").textContent = round1(total / 15);
  $("outTsp").textContent  = round1(total / 5);
  $("outCc").textContent   = round1(total);
  $("outG").textContent    = round1(total * DENSITY[$("condiment").value] / 100);
}

document.querySelectorAll(".btn-step").forEach(btn=>{
  btn.addEventListener("click", ()=>{
    applyStep(btn.dataset.target, Number(btn.dataset.delta));
  });
});

$("condiment").value="水";
calc();
</script>
</body>
</html>
